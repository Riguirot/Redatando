<label class="switch">
  <input
    id="theme-toggle"
    class="switch__input"
    type="checkbox"
    role="switch"
    aria-label="Alternar tema"
  />

  <span class="switch__icon">
    <span class="switch__icon-part switch__icon-part--1"></span>
    <span class="switch__icon-part switch__icon-part--2"></span>
    <span class="switch__icon-part switch__icon-part--3"></span>
    <span class="switch__icon-part switch__icon-part--4"></span>
    <span class="switch__icon-part switch__icon-part--5"></span>
    <span class="switch__icon-part switch__icon-part--6"></span>
    <span class="switch__icon-part switch__icon-part--7"></span>
    <span class="switch__icon-part switch__icon-part--8"></span>
    <span class="switch__icon-part switch__icon-part--9"></span>
    <span class="switch__icon-part switch__icon-part--10"></span>
    <span class="switch__icon-part switch__icon-part--11"></span>
  </span>

  <!-- Acessibilidade (não visível) -->
  <span class="sr-only">Alternar tema claro/escuro</span>
</label>

<script is:inline>
  const toggle = document.querySelector("#theme-toggle");

  if (toggle) {
    const savedTheme = localStorage.getItem("theme");

    // Estado inicial
    if (savedTheme === "dark") {
      document.documentElement.classList.add("dark");
      toggle.checked = true;
    } else if (savedTheme === "light") {
      document.documentElement.classList.remove("dark");
      toggle.checked = false;
    }

    toggle.addEventListener("change", () => {
      const enabled = toggle.checked;

      document.documentElement.classList.toggle("dark", enabled);
      localStorage.setItem("theme", enabled ? "dark" : "light");
    });
  }
</script>
